---
import Navbar from "../components/Navbar.astro";
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home - Astro E-commerce</title>

    <!-- Inline script to load Google Analytics -->
    <script is:inline>
      (function () {
        // Define the function to load Google Analytics
        async function loadAnalyticsScript() {
          if (
            window.location.hostname === "localhost" ||
            window.location.hostname === "127.0.0.1" ||
            window.location.hostname === "astro-another-domain.vercel.app"
          ) {
            console.log("Google Analytics tracking is disabled for localhost and astro-another-domain.vercel.app..");
            return; // Exit the function if on localhost
          }

          try {
            // Dynamically load the Google Analytics script
            const script = document.createElement("script");
            script.src =
              "https://www.googletagmanager.com/gtag/js?id=G-56FMGB8XJ3";
            script.async = true;
            document.head.appendChild(script);

            script.onload = () => {
              window.dataLayer = window.dataLayer || [];
              function gtag() {
                window.dataLayer.push(arguments);
              }
              gtag("js", new Date());
              gtag("config", "G-56FMGB8XJ3");
            };
          } catch (error) {
            console.error("Failed to load Google Analytics script:", error);
          }
        }

        // Call the function
        loadAnalyticsScript();
      })();
    </script>
  </head>
  <body>
    <Navbar />
    <h1>Welcome to Astro E-commerce</h1>
  </body>
</html>
